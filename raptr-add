#!/usr/bin/env bash
set -e
script_name="$(basename "$BASH_SOURCE")"
script_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

while [[ "$#" > 0 ]]; do
  case "$1" in
    -t|--target|--target=) target="$2"; shift ;;
    -p|--package|--package=) package="$2"; shift ;;
	*) shift ;;
  esac
done

[ -z "$target" ] && echo "Missing required target to which package should be added." && exit 1
[ -z "$package" ] && echo "Missing required package to add." && exit 1
[ ! -d ./dists ] && echo "The command must be executed inside of an active repository." && exit 1
[ ! -d ./pool ] && echo "The command must be executed inside of an active repository." && exit 1

all_targets="$(cd dists; find . -mindepth 2 -maxdepth 2 -type d | sed -r 's/\.\/(.*)/\1/g')"
all_distributions="$(cd dists; ls -d *)"
all_sections="$(cd pool; ls -d *)"



exit 0




[ -z "$directory" ] && echo "Missing required directory of packages to add." && exit 1
[ ! -d "pool/$section" ] && echo "The section specified does not exist." && exit 1
[ ! -d "$directory" ] && echo "The directory specified was not found." && exit 1
[ -z "$(ls "$directory")" ] && echo "No package files found." && exit 1
[[ "$package" =~ ( |\') ]] && echo "The package name cannot contain whitespace characters." && exit 1

mkdir -p "pool/$section/${package::1}/$package"
if [ -n "$binary_only" ]; then cp -r "$directory"/*.deb "pool/$section/${package::1}/$package"
else cp -r "$directory"/* "pool/$section/${package::1}/$package"
fi

echo "Added Debian package contents from \"$directory\" to \"$section\" pool."
exit 0
